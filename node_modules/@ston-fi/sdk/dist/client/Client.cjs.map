{"version":3,"file":"Client.cjs","sources":["../../src/client/Client.ts"],"sourcesContent":["import { StonApiClient } from \"@ston-fi/api\";\nimport { Address, TonClient, TupleReader, beginCell } from \"@ton/ton\";\n\nexport class Client extends TonClient {\n  private stonApiClient: StonApiClient;\n\n  constructor(\n    options: ConstructorParameters<typeof TonClient>[0] & {\n      stonApiClient?: StonApiClient;\n    },\n  ) {\n    super(options);\n\n    this.stonApiClient = options.stonApiClient ?? new StonApiClient();\n  }\n\n  public override async callGetMethod(\n    ...args: Parameters<TonClient[\"callGetMethod\"]>\n  ) {\n    if (args[1] === \"get_wallet_address\" && args[2]?.[0]?.type === \"slice\") {\n      try {\n        const jettonWalletAddress =\n          await this.stonApiClient.getJettonWalletAddress({\n            jettonAddress: args[0].toString(),\n            ownerAddress: args[2][0].cell.beginParse().loadAddress().toString(),\n          });\n\n        return {\n          gas_used: 0,\n          stack: new TupleReader([\n            {\n              type: \"slice\",\n              cell: beginCell()\n                .storeAddress(Address.parse(jettonWalletAddress))\n                .endCell(),\n            },\n          ]),\n        };\n      } catch {\n        //\n      }\n    }\n\n    return super.callGetMethod(...args);\n  }\n}\n"],"names":["TonClient","StonApiClient","TupleReader","beginCell","Address"],"mappings":";;;;AAGO,MAAM,eAAeA,IAAAA,UAAU;AAAA,EAGpC,YACE,SAGA;AACA,UAAM,OAAO;AAEb,SAAK,gBAAgB,QAAQ,iBAAiB,IAAIC,IAAc,cAAA;AAAA,EAClE;AAAA,EAEA,MAAsB,iBACjB,MACH;;AACI,QAAA,KAAK,CAAC,MAAM,0BAAwB,gBAAK,CAAC,MAAN,mBAAU,OAAV,mBAAc,UAAS,SAAS;AAClE,UAAA;AACF,cAAM,sBACJ,MAAM,KAAK,cAAc,uBAAuB;AAAA,UAC9C,eAAe,KAAK,CAAC,EAAE,SAAS;AAAA,UAChC,cAAc,KAAK,CAAC,EAAE,CAAC,EAAE,KAAK,WAAW,EAAE,YAAY,EAAE,SAAS;AAAA,QAAA,CACnE;AAEI,eAAA;AAAA,UACL,UAAU;AAAA,UACV,OAAO,IAAIC,IAAAA,YAAY;AAAA,YACrB;AAAA,cACE,MAAM;AAAA,cACN,MAAMC,IAAAA,UACH,EAAA,aAAaC,IAAAA,QAAQ,MAAM,mBAAmB,CAAC,EAC/C,QAAQ;AAAA,YACb;AAAA,UAAA,CACD;AAAA,QAAA;AAAA,MACH,QACM;AAAA,MAER;AAAA,IACF;AAEO,WAAA,MAAM,cAAc,GAAG,IAAI;AAAA,EACpC;AACF;;"}