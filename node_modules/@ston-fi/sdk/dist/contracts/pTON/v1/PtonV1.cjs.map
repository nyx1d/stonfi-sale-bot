{"version":3,"file":"PtonV1.cjs","sources":["../../../../src/contracts/pTON/v1/PtonV1.ts"],"sourcesContent":["import {\n  type Cell,\n  type ContractProvider,\n  type Sender,\n  type SenderArguments,\n  address,\n} from \"@ton/ton\";\n\nimport type { ContractOptions } from \"@/contracts/core/Contract\";\nimport { JettonMinter } from \"@/contracts/core/JettonMinter\";\nimport type { AddressType, AmountType, QueryIdType } from \"@/types\";\nimport { createJettonTransferMessage } from \"@/utils/createJettonTransferMessage\";\n\nimport { pTON_VERSION } from \"../constants\";\n\nexport interface PtonV1Options extends ContractOptions {}\n\nexport class PtonV1 extends JettonMinter {\n  public static readonly version: pTON_VERSION = pTON_VERSION.v1;\n\n  public static readonly address = address(\n    \"EQCM3B12QK1e4yZSf8GtBRT0aLMNyEsBc_DhVfRRtOEffLez\",\n  );\n\n  constructor(address: AddressType = PtonV1.address, options?: PtonV1Options) {\n    super(address, options);\n  }\n\n  public async getTonTransferTxParams(\n    provider: ContractProvider,\n    params: {\n      tonAmount: AmountType;\n      destinationAddress: AddressType;\n      refundAddress: AddressType;\n      forwardPayload?: Cell;\n      forwardTonAmount?: AmountType;\n      queryId?: QueryIdType;\n    },\n  ): Promise<SenderArguments> {\n    const to = await this.getWalletAddress(provider, params.destinationAddress);\n\n    const body = createJettonTransferMessage({\n      queryId: params.queryId ?? 0,\n      amount: params.tonAmount,\n      destination: params.destinationAddress,\n      forwardTonAmount: BigInt(params.forwardTonAmount ?? 0),\n      forwardPayload: params.forwardPayload,\n    });\n\n    const value =\n      BigInt(params.tonAmount) + BigInt(params.forwardTonAmount ?? 0);\n\n    return { to, value, body };\n  }\n\n  public async sendTonTransfer(\n    provider: ContractProvider,\n    via: Sender,\n    params: Parameters<PtonV1[\"getTonTransferTxParams\"]>[1],\n  ) {\n    const txParams = await this.getTonTransferTxParams(provider, params);\n\n    return via.send(txParams);\n  }\n}\n"],"names":["_PtonV1","JettonMinter","address","createJettonTransferMessage","pTON_VERSION"],"mappings":";;;;;;AAiBO,MAAM,UAAN,MAAMA,iBAAeC,0BAAa;AAAA,EAOvC,YAAYC,WAAuBF,SAAO,SAAS,SAAyB;AAC1E,UAAME,UAAS,OAAO;AAAA,EACxB;AAAA,EAEA,MAAa,uBACX,UACA,QAQ0B;AAC1B,UAAM,KAAK,MAAM,KAAK,iBAAiB,UAAU,OAAO,kBAAkB;AAE1E,UAAM,OAAOC,4BAAAA,4BAA4B;AAAA,MACvC,SAAS,OAAO,WAAW;AAAA,MAC3B,QAAQ,OAAO;AAAA,MACf,aAAa,OAAO;AAAA,MACpB,kBAAkB,OAAO,OAAO,oBAAoB,CAAC;AAAA,MACrD,gBAAgB,OAAO;AAAA,IAAA,CACxB;AAEK,UAAA,QACJ,OAAO,OAAO,SAAS,IAAI,OAAO,OAAO,oBAAoB,CAAC;AAEzD,WAAA,EAAE,IAAI,OAAO;EACtB;AAAA,EAEA,MAAa,gBACX,UACA,KACA,QACA;AACA,UAAM,WAAW,MAAM,KAAK,uBAAuB,UAAU,MAAM;AAE5D,WAAA,IAAI,KAAK,QAAQ;AAAA,EAC1B;AACF;AA/Ca,QACY,UAAwBC,UAAa,aAAA;AADjD,QAGY,UAAUF,IAAA;AAAA,EAC/B;AACF;AALK,IAAM,SAAN;;"}